---
title: Blueprints
type: page
layout: doc
---

Blueprints are a very important concept in the usage of Octopus. With blueprints, it's possible
to define a type of resource, and its instances, while also validating the properties 
of each one of these instances.

For example, let's assume that we are working on an HTML file. We want
this HTML file to contain version numbers and download links of an open source
library we are maintaining. We don't want to write the HTML code over and over 
every time the versions change &mdash; we just want to write it once as a template, 
and then have the file generated by Octopus.

Given these specifications, we know we want a series of `software releases`,
where each release has the properties `link`, `version`, and an optional boolean
`stable` that defaults to `true`. Also we have a generic variable that defines 
the name of our software.

Blueprints are defined under the `blueprints` property in the `octopus.json` file.
This property will look like an object. To add a blueprint, it is enough to define
a new property in this object. This is how an empty blueprint looks.

```json
{
    "blueprints": {
        "my-blueprint": {
            "variables": {}
        }
    }
}
```

`variables` will contain the definition of all the variables that this blueprint
supports. To add definitions, it is enough to specify the property (name of the variable),
and an object. For example:

```json
{
    "blueprints": {
        "my-blueprint": {
            "variables": {
                "my-variable": {
                    "type": "string",
                    "required": true
                }
            }
        }
    }
}
```

A variable definition must contain a `type` property (`string`, `integer`, or `boolean`). 
By default, the property `required` is `false` and `default` is `null`. Knowing this, we can 
define the blueprint for our JSON example.

```json
{
    "variables": {
        "name": "my-software"
    },
    
    "blueprints": {
        "release": {
            "variables": {
                "link": {
                    "type": "string",
                    "required": true
                },
                "version": {
                    "type": "string",
                    "required": true
                },
                "stable": {
                    "type": "boolean",
                    "default": true
                }
            }
        }
    },
    
    "data": {},
    
    "output": []
}
```

As you can see, we have a new property called `data`. This is an object where
every key is the name of a defined blueprint, and its property is a list of objects
that are the instances of the blueprint. For example:

```json
{
    "data": {
        "release": [
            {
                "link": "http://example.com/downloads/0.0.1/software.phar",
                "version": "0.0.1"
            },
            {
                "link": "http://example.com/downloads/unstable/0.0.2beta/software.phar",
                "version": "0.0.2beta",
                "stable": false
            }
        ]
    }
}
```

We defined two releases, one of them unstable, and we provided the link and the version
just like the blueprint defines. Note that Octopus _will_ validate the `data` object
using the definition provided in the blueprint configuration.

At this moment, Octopus will not generate any files, because the `output` property
is still empty. We can add the definition of our HTML file now.

```json
{
    "output": [
        {
            "type": "file",
            "path": "releases.html",
            "template": "releases.html.twig"
        }
    ]
}
```

And we can define our template like so:

```html
<h1>
    {{ configuration.variables.name }}
</h1>

<ul class="releases">
    {% for release in data.release %}
        <li class="release {% if release.stable %}stable{% else %}unstable{% endif %}">
            <h2>{{ release.version }}</h2>
            <a href="{{ release.link }}">Download</a>
        </li>
    {% endfor %}
</ul>
```

Building now will generate the file as we expect it.
